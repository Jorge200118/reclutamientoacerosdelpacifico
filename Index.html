<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vacantes Disponibles - Aceros del Pacífico</title>
  <!-- Enlace a Font Awesome para íconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <!-- Enlace a Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Helvetica+Neue:wght@400;700&display=swap" rel="stylesheet">
  <style>
/* Diseño Minimalista Mejorado */

/* Definir variables globales */
:root {
  --primary-color: #0d1c59;
  --secondary-color: #007bff;
  --accent-color: #003366;
  --background-color: #f9f9f9;
  --text-color: #333;
  --muted-text-color: #555;
  --white-color: #ffffff;
  --font-family: 'Helvetica Neue', sans-serif;
  --font-size-large: 2em;
  --font-size-medium: 1.25em;
  --font-size-small: 1em;
  --transition-duration: 0.3s;
}

/* Reset de márgenes y paddings */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Tipo de letra */
body {
  font-family: var(--font-family);
  background-color: var(--background-color);
  color: var(--text-color);
}

/* Estilos para el header */
header {
  background-color: var(--primary-color);
  color: white;
  padding: 20px;
  text-align: center;
  border-bottom: 4px solid var(--secondary-color);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 1000;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

header .logo {
  max-width: 180px;
  margin-left: 20px;
  transition: transform 0.3s;
}

header .logo:hover {
  transform: scale(1.05);
}

 .intro {
        padding: 20px;
        text-align: center;
        background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
        color: white;
        box-shadow: var(--box-shadow);
    }

    .intro p {
        font-size: 1.5em;
        font-weight: bold;
    }
/* Estilos para la sección principal */
.pagina {
  display: flex;
  padding: 40px 20px;
  gap: 40px;
  flex-wrap: wrap;
}

.contenido {
  flex: 1;
}

.formulario-container {
  width: 100%;
  max-width: 600px;
  background-color: var(--white-color);
  padding: 30px;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

iframe {
  border: none;
}

/* Estilos para las sucursales */
.sucursales {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 24px;
}

.sucursal-card {
  background-color: var(--white-color);
  border-radius: 10px;
  overflow: hidden;
  transition: transform var(--transition-duration), box-shadow var(--transition-duration);
}

.sucursal-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.sucursal-img {
  width: 100%;
  height: 180px;
  object-fit: cover;
}

.sucursal-info {
  padding: 16px;
  text-align: center;
}

.sucursal-info h2 {
  font-size: var(--font-size-medium);
  color: var(--accent-color);
  margin-bottom: 8px;
}

.sucursal-info p {
  font-size: var(--font-size-small);
  color: var(--muted-text-color);
}

.cta-button {
  display: inline-block;
  margin-top: 16px;
  background-color: var(--secondary-color);
  color: var(--white-color);
  padding: 10px 20px;
  border-radius: 4px;
  text-decoration: none;
  font-size: var(--font-size-small);
  transition: background-color var(--transition-duration), transform var(--transition-duration);
}

.cta-button:hover {
  background-color: var(--accent-color);
  transform: scale(1.05);
}

/* Estilos para las vacantes */
.vacante {
  background-color: var(--white-color);
  border-radius: 10px;
  padding: 20px;
  margin-bottom: 24px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.vacante-img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 8px;
  margin-bottom: 16px;
}

.vacante h3 {
  font-size: 1.5em;
  color: var(--accent-color);
  margin-bottom: 12px;
}

.vacante p {
  font-size: var(--font-size-medium);
  color: var(--muted-text-color);
  margin-bottom: 8px;
}

.vacante a.cta-button {
  margin-top: 12px;
}

/* Información de contacto */
.informacion-contacto {
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 40px;
  background-color: var(--background-color);
  text-align: center;
  flex-wrap: wrap;
}

.tooltip-icon {
  font-size: 3em;
  color: var(--secondary-color);
  cursor: pointer;
  transition: color var(--transition-duration), transform var(--transition-duration);
}

.tooltip-icon:hover {
  color: var(--primary-color);
  transform: scale(1.1);
}

.tooltip-text {
  visibility: hidden;
  width: 250px;
  background-color: #333;
  color: var(--white-color);
  text-align: center;
  border-radius: 5px;
  padding: 15px;
  position: absolute;
  z-index: 1;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  transition: opacity var(--transition-duration), visibility var(--transition-duration);
  font-size: var(--font-size-small);
}

.tooltip-text::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: #333 transparent transparent transparent;
}

.info-item:hover .tooltip-text {
  visibility: visible;
  opacity: 1;
}

.info-item {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: auto;
  flex: 1;
}

footer {
  background-color: var(--accent-color);
  color: var(--white-color);
  text-align: center;
  padding: 20px;
  font-size: var(--font-size-small);
  border-top: 1px solid #ddd;
}

/* Modal de carga */
#loaderModal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(44, 62, 80, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  opacity: 1;
  visibility: visible;
  transition: opacity var(--transition-duration) ease;
}

#loaderModal.hidden {
  opacity: 0;
  visibility: hidden;
}

.loader-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  color: var(--white-color);
  font-size: 1.62em;
  text-align: center;
}

.spinner {
  border: 4.5px solid rgba(255, 255, 255, 0.3);
  border-top: 4.5px solid var(--white-color);
  border-radius: 50%;
  width: 45px;
  height: 45px;
  animation: spin 1s linear infinite;
  margin-bottom: 18px;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Responsive design */
@media (max-width: 1024px) {
  .pagina {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
  }

  .formulario-container {
    max-width: none;
    flex: 1;
  }
}

@media (max-width: 768px) {
  .pagina {
    flex-direction: column;
    padding: 20px 10px;
    gap: 20px;
  }

  .informacion-contacto {
    flex-direction: column;
    gap: 20px;
  }
}

@media (max-width: 576px) {
  header .logo {
    height: 40px;
  }

  .sucursales {
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }

  .sucursal-info h2 {
    font-size: 1.2em;
  }

  .sucursal-info p {
    font-size: 0.9em;
  }

  .cta-button {
    font-size: 0.9em;
    padding: 8px 16px;
  }

  .vacante h3 {
    font-size: 1.3em;
  }

  .vacante p {
    font-size: 1em;
  }

  .tooltip-text {
    font-size: 0.9em;
  }
}

/* Botón de volver a la lista de sucursales */
.volver-button {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background-color: var(--secondary-color);
  color: var(--white-color);
  padding: 10px 20px;
  border-radius: 4px;
  font-size: var(--font-size-small);
  cursor: pointer;
  transition: background-color var(--transition-duration), transform var(--transition-duration);
  border: none;
  text-align: center;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 1000; /* Asegura que el botón esté sobre otros elementos */
}

.volver-button:hover {
  background-color: var(--accent-color);
  transform: scale(1.05);
}
  </style>
</head>
<body>

<!-- Encabezado -->
<header>
  <div class="container">
    <img src="logo.png" alt="Aceros del Pacífico" class="logo">
  </div>
</header>

</header>
    <section class="intro">
        <div class="container">
            <p>Bienvenido a nuestra página de vacantes.</p> 
            <p>¡Forma parte de nuestro equipo!</p>
            <p>Te estamos buscando.</p>
             <!-- <p>¡Únete a nuestro equipo!</p>  -->
        </div>
    </section>
<!-- Contenido principal -->
<section class="pagina">
  <div class="contenido">
    <!-- Aquí se mostrarán las sucursales o las vacantes -->
    <div class="sucursales"></div>
  </div>
  <div class="formulario-container">
    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfvc46ghK_Q_vjDVg3EMF168umEyoHd5dSTVbvGOzF0i7qe9Q/viewform?embedded=true" width="100%" height="1316" frameborder="0" marginheight="0" marginwidth="0">Cargando…</iframe>
  </div>
</section>

<!-- Información de contacto -->
<section class="informacion-contacto">
  <div class="info-item">
    <i class="fas fa-phone tooltip-icon"></i>
    <span class="tooltip-text">Persona de contacto: <strong>Jorge Félix</strong><br>Teléfono: 6882191668 (Únicamente llamadas).</span>
  </div>
  <div class="info-item">
    <i class="fas fa-clock tooltip-icon"></i>
    <span class="tooltip-text">Horarios de trabajo:<br>Lunes a viernes, 8 a.m. - 1 p.m. y 2:30 p.m. - 6 p.m.<br>Sábados, 8 a.m. - 1:30 p.m.</span>
  </div>
  <div class="info-item">
    <i class="fas fa-file-alt tooltip-icon"></i>
    <span class="tooltip-text">Documentación principal:<br>Solicitud de empleo / Currículum vitae<br>Identificación oficial - Vigente<br>Comprobante de domicilio<br>Número de Seguridad Social<br>Constancia de Situación Fiscal</span>
  </div>
</section>

<!-- Footer -->
<footer>
  <div class="container">
    <p>© 2024 Aceros del Pacífico. Todos los derechos reservados.</p>
  </div>
</footer>

<!-- Modal de carga -->
<div id="loaderModal">
  <div class="loader-content">
    <div class="spinner"></div>
    <p>Cargando vacantes...</p>
  </div>
</div>

<!-- Scripts -->
<script>
  // Función para cargar las sucursales y vacantes según el hash en la URL
  async function cargarContenido() {
    const url = 'https://script.google.com/macros/s/AKfycbzXKwp9Y7JfdpkIlFKZGxuB84mD2UjffR5y0viXQiI4_QxXOUKIkw3jSSD-0aQ3dmYZ/exec';
    const contenidoContainer = document.querySelector('.sucursales');
    contenidoContainer.innerHTML = ''; // Limpiar cualquier contenido anterior

    const loaderModal = document.getElementById('loaderModal');
    loaderModal.classList.remove('hidden'); // Mostrar el modal

    let vacantes = sessionStorage.getItem('vacantes');
    if (vacantes) {
      vacantes = JSON.parse(vacantes);
      procesarVacantes(vacantes);
      loaderModal.classList.add('hidden'); // Ocultar el modal cuando se cargan las vacantes
    } else {
      try {
        const response = await fetch(url);
        vacantes = await response.json();
        sessionStorage.setItem('vacantes', JSON.stringify(vacantes));
        procesarVacantes(vacantes);
        loaderModal.classList.add('hidden'); // Ocultar el modal cuando se cargan las vacantes
      } catch (error) {
        console.error('Error al cargar el contenido:', error);
        contenidoContainer.innerHTML = '<p>Error al cargar el contenido. Inténtalo más tarde.</p>';
        loaderModal.classList.add('hidden'); // Ocultar el modal en caso de error
      }
    }
  }

    // Función para procesar y mostrar las vacantes según el hash
  function procesarVacantes(vacantes) {
    const hash = window.location.hash; // Obtener el hash de la URL (#sucursal)
    const contenidoContainer = document.querySelector('.sucursales');

    if (!hash || hash === '#') {
      // Si no hay hash o es vacío, mostrar las sucursales
      mostrarSucursales(vacantes, contenidoContainer);
    } else {
      // Si hay un hash (#sucursal), mostrar las vacantes para esa sucursal
      const sucursal = decodeURIComponent(hash.substring(1)); // Eliminar el '#' y decodificar el valor
      mostrarVacantes(vacantes, sucursal, contenidoContainer);
    }
  }

  // Función para mostrar las sucursales
  function mostrarSucursales(vacantes, container) {
    const sucursales = {};

    // Agrupar las vacantes por sucursal
    vacantes.forEach(vacante => {
      if (!sucursales[vacante.sucursal]) {
        sucursales[vacante.sucursal] = [];
      }
      sucursales[vacante.sucursal].push(vacante);
    });

    container.innerHTML = ''; // Limpiar el contenedor antes de agregar las sucursales

    // Crear los enlaces para cada sucursal
    for (const sucursal in sucursales) {
      const sucursalDiv = document.createElement('div');
      sucursalDiv.classList.add('sucursal');

      // Crear una tarjeta de la sucursal
      sucursalDiv.innerHTML = `
        <div class="sucursal-card">
          <img src="${sucursal}.jpg" alt="${sucursal}" class="sucursal-img" loading="lazy" onerror="this.onerror=null; this.src='default-sucursal.jpg';">
          <div class="sucursal-info">
            <h2>${sucursal}</h2>
            <p>Haz clic para descubrir las vacantes en esta sucursal.</p>
            <a href="#${encodeURIComponent(sucursal)}" class="cta-button">Ver Vacantes</a>
          </div>
        </div>
      `;

      container.appendChild(sucursalDiv);
    }
  }

  // Función para mostrar las vacantes de una sucursal
  function mostrarVacantes(vacantes, sucursalSeleccionada, container) {
    const vacantesUnicas = {};

    vacantes.forEach(vacante => {
      const clave = `${vacante.sucursal}-${vacante.puesto}`;
      if (!vacantesUnicas[clave]) {
        vacantesUnicas[clave] = vacante; // Evitar duplicados
      }
    });

    const vacantesFiltradas = Object.values(vacantesUnicas).filter(v => v.sucursal === sucursalSeleccionada);

    container.innerHTML = ''; // Limpiar el contenedor antes de agregar vacantes

    if (vacantesFiltradas.length > 0) {

      vacantesFiltradas.forEach(vacante => {
        const vacanteDiv = document.createElement('div');
        vacanteDiv.classList.add('vacante');

        // Generar enlace de WhatsApp
        const telefonoWhatsApp = '526682191668'; // Asegúrate de incluir el código de país
        const mensaje = `Estoy interesado en la vacante de ${vacante.puesto}`;
        const enlaceWhatsApp = `https://wa.me/${telefonoWhatsApp}?text=${encodeURIComponent(mensaje)}`;

        vacanteDiv.innerHTML = `
          <img src="${obtenerImagenVacante(vacante.puesto)}" alt="${vacante.puesto}" class="vacante-img" onerror="this.onerror=null; this.src='default.jpg';">
          <h3>${vacante.puesto}</h3>
          <p><strong>Salario:</strong> ${formatearSalario(vacante.salario)}</p>
          <p><strong>Descripción:</strong> ${vacante.descripcion}</p>
          <a href="${enlaceWhatsApp}" class="cta-button" target="_blank">¡Estoy interesado!</a>
        `;

        container.appendChild(vacanteDiv);
      });
    } else {
      container.innerHTML = `<p>No hay vacantes disponibles en ${sucursalSeleccionada}</p>`;
    }

    // Crear el botón de "Volver a la lista de sucursales"
    const volverButton = document.createElement('button');
    volverButton.textContent = 'Volver a la lista de sucursales';
    volverButton.classList.add('volver-button'); // Añadir la clase para estilizar el botón

    // Agregar el botón al contenedor
    container.insertBefore(volverButton, container.firstChild);

    // Evento para volver a la lista de sucursales cuando se haga clic en el botón
    volverButton.addEventListener('click', function() {
      window.location.hash = ''; // Limpiar el hash y volver a la lista de sucursales
      cargarContenido(); // Recargar el contenido de las sucursales
    });
  }

  // Función para obtener la imagen según el puesto
  function obtenerImagenVacante(puesto) {
    // Convertir el nombre del puesto a minúsculas, eliminar acentos y caracteres especiales
    const nombreImagen = puesto.toLowerCase()
      .normalize('NFD').replace(/[\u0300-\u036f]/g, '') // Eliminar acentos
      .replace(/\s+/g, '-') // Reemplazar espacios por guiones
      .replace(/[^\w-]/g, ''); // Eliminar caracteres que no sean letras, números o guiones
    return `${nombreImagen}.jpg`; // Ruta donde se almacenan las imágenes
  }

  // Función para formatear el salario como moneda sin decimales
  function formatearSalario(salario) {
    return new Intl.NumberFormat('es-MX', {
      style: 'currency',
      currency: 'MXN',
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(salario);
  }

  // Cargar el contenido cuando la página se cargue o cambie el hash
  document.addEventListener('DOMContentLoaded', cargarContenido);
  window.addEventListener('hashchange', cargarContenido); // Recargar contenido al cambiar el hash
</script>
</body>
</html>
